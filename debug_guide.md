# 卡片居中和上滑分享功能调试指南

## 1. 卡片居中验证

### 自动检查功能
页面加载后会自动执行 `verifyCenterPosition()` 方法，在控制台输出详细的居中分析：

```
=== 开始验证卡片居中位置 ===
📱 视口信息: { width, height, centerX, centerY }
📦 容器信息: { width, height, left, top, centerX, centerY }
🎯 Hero区域信息: { width, height, left, top, centerX, centerY }
🎡 轮盘容器信息: { width, height, left, top, centerX, centerY }
📏 居中偏移分析: { 水平偏移, 垂直偏移, 水平居中, 垂直居中 }
📊 位置百分比: { 水平位置, 垂直位置, 理想位置, 水平偏差, 垂直偏差 }
🎯 居中评估结果: ✅ 卡片居中良好 / ❌ 卡片居中需要调整
=== 卡片居中位置验证完成 ===
```

### 手动验证步骤
1. 打开微信开发者工具
2. 进入项目页面
3. 打开控制台（Console）
4. 查看页面加载后的居中验证日志
5. 检查偏移量是否在合理范围内（< 5px）

### 居中标准
- **完美居中**: 偏移量 < 1px
- **基本居中**: 偏移量 < 5px
- **需要调整**: 偏移量 ≥ 5px

## 2. 上滑分享功能排查

### 手势识别调试
在页面上进行上滑操作时，控制台会输出详细的手势分析：

```
🖐️ 触摸开始: { clientX, clientY, pageX, pageY, timestamp }
👆 手势移动: { deltaY, deltaTime, velocity, direction }
🏁 触摸结束 - 手势分析: { 起始位置, 结束位置, 垂直位移, 水平位移, 持续时间, 垂直速度, 手势方向 }
📋 手势识别条件检查: { 垂直距离, 时间限制, 速度要求, 水平偏移 }
✅ 上滑手势识别成功，触发分享功能 / ❌ 上滑手势识别失败，未满足条件
```

### 手势识别条件
- **垂直距离**: > 30px（向上滑动）
- **时间限制**: < 800ms
- **速度要求**: > 0.1px/ms
- **水平偏移**: < 100px（防止斜滑）

### 分享功能检查流程
当触发分享时，系统会执行完整的检查流程：

```
🚀 === 开始分享功能检查流程 ===
🔍 检查微信环境:
📋 微信API检查结果: { 微信对象, 分享API, 截图API, 文件系统, 选择器查询 }
📱 系统信息: { platform, version, SDKVersion, brand, model }
🔍 检查分享组件状态:
🎮 XR组件状态: { 场景对象, 场景类型, XR元素存在 }
🖼️ Canvas组件状态: { Canvas元素存在, Canvas尺寸, Canvas位置 }
📊 数据状态: { 选中餐厅, 餐厅名称, 分享文案, 轮盘数据 }
📸 尝试XR-Frame分享系统
🖼️ 尝试Canvas截图方案
📝 使用最终退化方案：仅文字分享
🏁 === 分享功能检查流程结束 ===
```

## 3. 常见问题排查

### 卡片不居中
1. 检查 `.hero-area` 的 CSS 样式
2. 确认 `align-items: center` 和 `justify-content: center` 生效
3. 查看容器的 padding 和 margin 设置
4. 检查视口尺寸和容器尺寸的关系

### 上滑手势无响应
1. 确认触摸事件绑定正确（`bindtouchstart`, `bindtouchmove`, `bindtouchend`）
2. 检查手势识别条件是否过于严格
3. 验证滑动距离、时间和速度是否满足要求
4. 确认没有其他元素阻挡触摸事件

### 分享功能失败
1. 检查微信API可用性
2. 验证XR场景和Canvas元素是否正确初始化
3. 确认分享数据（餐厅信息、文案）是否完整
4. 查看网络权限和文件系统权限

## 4. 测试建议

### 设备测试
- 在不同尺寸的设备上测试居中效果
- 测试不同的滑动速度和距离
- 验证横屏和竖屏模式下的表现

### 边界情况测试
- 极慢的滑动操作
- 极快的滑动操作
- 斜向滑动
- 多点触控
- 页面滚动时的手势识别

### 性能测试
- 连续多次触发分享功能
- 在低性能设备上的表现
- 内存使用情况监控

## 5. 调试技巧

1. **实时监控**: 保持控制台开启，观察实时日志输出
2. **分步测试**: 先测试手势识别，再测试分享功能
3. **数据验证**: 确认页面数据完整性
4. **环境检查**: 验证微信开发者工具版本和设置
5. **清除缓存**: 必要时清除小程序缓存重新测试

通过以上调试指南，可以系统性地排查和解决卡片居中和上滑分享功能的问题。