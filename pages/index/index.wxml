<view class="container" bindtouchstart="onTouchStart" bindtouchmove="onTouchMove" bindtouchend="onTouchEnd">
  <view class="disabled-banner banner-location">
    <text class="icon">ğŸ—ºï¸</text>
    <text class="msg">å®šä½åŠŸèƒ½å¼€å‘ä¸­ï¼Œè¯·æœŸå¾…</text>
  </view>
  <view class="title">What to eat today?</view>

  <!-- è½®ç›˜å®¹å™¨ï¼šæŒ‡é’ˆå‘ä¸‹ï¼Œè½®ç›˜æœ¬èº«æ—‹è½¬ï¼ŒæŒ‰é’®ä¿æŒå›ºå®š -->
  <view class="hero-area">
    <view class="roulette-wheel-container">
      <view class="roulette-wheel palette-{{currentPaletteKey}} {{spinClass}}" style="transform: rotate({{rouletteRotation}}deg);">
        <block wx:for="{{segments}}" wx:for-index="sidx" wx:key="sidx">
           <view class="roulette-item" style="transform: rotate({{item.angle}}deg)">
             <!-- æ‰‡åŒºå†…å¾„å‘æ’ç‰ˆæ–‡æœ¬ï¼šä»å¤–å‘å†…æ’åˆ— -->
             <view class="label-clip">
               <block wx:for="{{item.chars}}" wx:for-index="cidx" wx:for-item="ch" wx:key="*this">
                 <text class="label-ch" style="transform: translate(-50%, -50%) translateY(-{{ ch.pos }}rpx);">{{ch.ch}}</text>
               </block>
             </view>
           </view>
         </block>
       </view>
  
      <!-- æŒ‡é’ˆï¼ˆé¡¶éƒ¨ï¼Œä¸‰è§’å½¢æœä¸‹æŒ‡å‘ä¸­å¿ƒï¼‰ -->
      <view class="pointer"></view>
  
      <!-- å³ä¸Šè§’æ“ä½œæŒ‰é’®ï¼šé…è‰²åˆ‡æ¢ + åˆ·æ–°æ¨è -->
      <view class="top-actions">
        <view class="palette-switch" bindtap="onTogglePalette">
          <view class="palette-wheel"></view>
        </view>
        <image class="refresh-switch" src="/images/refresh_batch.png" bindtap="onRefreshWheel" />
      </view>
  
      <!-- å›ºå®šåœ¨ä¸­å¿ƒçš„å¼€å§‹æŒ‰é’®ä¸æ‰‹å‹ï¼ˆæ‰‹å‹ç‹¬ç«‹è¦†ç›–ï¼Œä¸å½±å“æŒ‰é’®å°ºå¯¸ï¼‰ -->
      <view class="roulette-center">
        <image class="start-hand" src="/images/hand.png" mode="widthFix" />
        <view class="start-button" bindtap="spinRoulette"><text class="art-text">å¼€å§‹</text></view>
      </view>
    </view>
  </view>

  <!-- å†³ç­–æµ®å±‚ -->
  <view class="decision-layer" wx:if="{{showDecisionLayer}}">
    <view class="dl-body">
      <image class="dl-logo" src="{{selected ? selected.icon : '/packageA/images/FullRest/placeholder.png'}}" mode="aspectFill" />
      <view class="dl-info">
        <view class="dl-name">{{selected && selected.name}}</view>
        <view class="dl-type">{{selected && (selected.type || 'é¤å…')}}</view>
        <view class="dl-promo">{{selected && (selected.promoText || 'ä¼˜æƒ ä¿¡æ¯ï¼šæ•¬è¯·æœŸå¾…')}}</view>
      </view>
    </view>
    <view class="dl-actions">
      <button class="dl-btn dl-primary" bindtap="onAccept">å°±å®ƒ</button>
      <button class="dl-btn dl-secondary" bindtap="onReroll">å†è½¬ä¸€æ¬¡</button>
      <button class="dl-btn dl-secondary" bindtap="onAddShortlist">åŠ å…¥å¤‡é€‰</button>
    </view>
  </view>

  <!-- å¤‡é€‰åŒºï¼ˆ3ä¸ªé€æ˜èƒŒæ™¯è™šçº¿å ä½ï¼Œå¡«å……åæ˜¾ç¤ºlogoå¡ç‰‡+åˆ é™¤æŒ‰é’®ï¼‰ -->
  <view class="shortlist">
    <view class="short-title">å¤‡é€‰æ¸…å•</view>
    <view class="short-grid short-grid-3">
      <block wx:for="{{shortlist}}" wx:key="id">
        <view class="short-slot filled" data-id="{{item.id}}" data-name="{{item.name}}" bindtap="onTapShortlistCard">
          <image class="short-img" src="{{item.icon}}" mode="scaleToFill" />
          <text class="short-remove" data-id="{{item.id}}" catchtap="onRemoveShort">Ã—</text>
        </view>
      </block>
      <block wx:for="{{placeholderSlots}}" wx:key="*this">
        <view class="short-slot placeholder"></view>
      </block>
    </view>
  </view>

  <!-- åˆ†äº«åŒºï¼ˆå›ºå®šåº•éƒ¨æ¡ï¼Œå›¾æ ‡æŒ‰é’®åœ¨å³ä¾§ï¼Œ3rpx è¾¹è·ï¼‰ -->
  <view class="share-bar">
    <view class="share-content">
      <text class="share-title">è½¬å‘å¥½å‹ï¼Œä¸€èµ·å†³ç­–</text>
      <text class="share-text" wx:if="{{showShareArea}}">{{shareText}}</text>
    </view>
    <view class="share-actions">
       <image class="icon-btn" src="/images/copy.svg" catchtap="onCopyShare" />
       <image class="icon-btn" src="/images/refresh.svg" catchtap="onRefreshShare" />
       <!-- ç§»é™¤ï¼šæ—§çš„å®šä½å¼€å‘ä¸­æç¤º -->
     </view>
  </view>
  <view class="page-bottom-spacer"></view>
  <!-- éšè—ç¦»å±ç”»å¸ƒï¼šç”¨äºå›é€€ç»˜åˆ¶åˆ†äº«å›¾ç‰‡ -->
  <canvas class="offscreen-canvas" canvas-id="shareCanvas" type="2d"></canvas>
  <!-- XR-FRAME åœºæ™¯ï¼šéšè—ï¼Œä»…ç”¨äºæˆªå›¾ä¸åˆ†äº«ç³»ç»Ÿ -->
  <xr-scene id="xr-scene" class="xr-hidden" ar-system bind:ready="onXrReady"></xr-scene>
</view>